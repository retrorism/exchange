{"version":3,"sources":["wp-foundation.js","init-foundation.js"],"names":["isEmpty","obj","length","key","hasOwnProperty","call","createRoute","arr_m","arr_l","arr_c","iconUrl","leaflet_vars","markerUrl","route","L","icon","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","featureGroup","snakingPause","i","marker","DivIcon","className","html","line","polyline","color","yellowTandem","weight","opacity","dashArray","lineJoin","snakingSpeed","addLayer","marker2","bindPopup","getQueryTag","data","option","tag","document","createElement","item","text","createTextNode","name","setAttribute","id","slug","tax","addEventListener","event","preventDefault","removeAttr","console","log","this","remove","appendChild","fetchCollaborationsQuery","alert","tags","jQuery","find","filters","object","k","v","String","taxquery","queryFilters","Error","restFilters","restBase","restUrl","baseUrl","fetchCollaborations","when","ajax","url","method","crossDomain","contentType","then","status","request","dataLength","collection","push","exchange_basics","collectionLength","l","prepareCollaborationMarkers","addTo","map","locations","markers","cities","lines","participant_id","participant","latlngs","isNumeric","org_lat","org_lng","org_city","j","foundation","Object","prototype","location","origin","protocol","host","getFocusTranslate","img_placeholder","img","img_data","parentNode","dataset","h","offsetHeight","container_h","px_translate","focus_h","max_translate","translate","doFocusTranslate","translateNeg","transform","ready","focus_img_containers","querySelectorAll","img_container","getElementsByClassName","classList","contains","floated_elements","equal_element","nextElementSibling","equal_h","style","height","each","select","on","doLanguageSwitch","lang","index","element","removeClass","hasClass","addClass","value","wrapper","parent","paragraphs","children","last","innerWidth","innerHeight","wrap","$archiveGrid","masonry","itemSelector","termList","term","val","undefined","termOption","termData","append","attr","e","$moreButton","paged","max_num_pages","posts_per_page","tax_query","success","pagelength","items","griditem","$items","hide","error","baseMapUrl","base","tileLayer","subdomains","layers","maxZoom","minZoom","zoomControl","scrollWheelZoom","attributionControl","setView","attControl","control","attribution","prefix","addAttribution"],"mappings":"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","file":"scripts.min.js","sourcesContent":["// Speed up calls to hasOwnProperty\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar baseUrl = location.origin;\nvar map;\n\nif (! location.origin) {\n\tbaseUrl = location.protocol + \"//\" + location.host;\n}\n\nif ( location.origin == 'http://localhost' ) {\n  baseUrl = location.origin + \"/tandem\";\n}\n\nfunction isEmpty(obj) {\n    if (obj == null) {\n\t\treturn true;\n\t}\n    if (obj.length > 0) {\n\t\treturn false;\n\t}\n    if (obj.length === 0) {\n\t\treturn true;\n\t}\n    if (typeof obj !== \"object\") {\n\t\treturn true;\n\t}\n    for (var key in obj) {\n        if (hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n    }\n    return true;\n}\n\nvar getFocusTranslate = function( img_placeholder, img ) {\n\timg_data = img_placeholder.parentNode.dataset;\n\tif ( ! img_data ) {\n\t\treturn false;\n\t}\n\tvar h = img.offsetHeight,\n\tcontainer_h =  img_placeholder.offsetHeight,\n\tpx_translate = ( img_data.focus_h * h ) - ( container_h / 2 ),\n\tmax_translate = ( ( h - container_h ) / h ) * 100,\n\ttranslate = ( px_translate / h ) * 100;\n\n\t// console.log( 'image height: ' + h );\n\t// console.log( 'focus point on ' + ( img_data.focus_h * h ) );\n\t// console.log( 'container center ' + ( container_h / 2 ) );\n\t// console.log( 'number of pixels to move: ' + px_translate );\n\t// console.log( 'number of percents to move: ' + translate );\n\t// console.log( 'max percent to move: ' + max_translate );\n\t// If the center of the container is below the focus point, don't move.\n\t// Or: if the translation is downwards, don't move (we're working from top).\n\tif ( px_translate < 0 || translate < 0 ) {\n\t\t//alert( 'translation smaller than 0' );\n\t\treturn false;\n\t}\n\n\tif ( translate > max_translate ) {\n\t\treturn max_translate;\n\t} else {\n\t\treturn translate;\n\t}\n};\n\nvar doFocusTranslate = function( img ) {\n\tvar img_placeholder = img.parentNode;\n\ttranslate = getFocusTranslate( img_placeholder, img );\n\t// Keep the negative, add minus if necessary\n\tif ( translate ) {\n\t\tvar translateNeg = translate > 0 ? -1 * translate : translate,\n\t\ttransform = 'transform: translateY(' + translateNeg + '%);';\n\t\timg.setAttribute( 'style', transform );\n\t}\n};\n\nfunction createRoute(arr_m,arr_l,arr_c) {\n\tvar iconUrl = leaflet_vars.markerUrl,\n\texchange_icon = L.icon({\n\t\ticonUrl: iconUrl,\n\t\ticonSize:     [14, 14], // size of the icon\n\t\tshadowSize:   [0, 0], // size of the shadow\n\t\ticonAnchor:   [7, 7], // point of the icon which will correspond to marker's location\n\t\tshadowAnchor: [4, 62],  // the same for the shadow\n\t\tpopupAnchor:  [0, 0] // point from which the popup should open relative to the iconAnchor\n\t}),\n\troute = L.featureGroup({snakingPause: 500 });\n\tif ( arr_m.length > 0 && arr_l.length > 0 ) {\n\t\tfor ( i = 0; i < arr_l.length; i++ ) {\n\t\t\tvar marker = L.marker( arr_m[i], {\n\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'+\n\t\t\t\t\t\t\t'<span class=\"map__marker__label\">'+arr_c[i]+'</span>'\n\t\t\t\t\t\t})\n\t\t\t});\n\t\t\tvar line = L.polyline( arr_l[i], {\n\t\t\t\tcolor : leaflet_vars.yellowTandem,\n\t\t\t\tclassName: 'map__line',\n\t\t\t\tweight : 6,\n\t\t\t\topacity : 0.9,\n\t\t\t\tdashArray : '12, 10',\n\t\t\t\tlineJoin: 'round',\n\t\t\t\tsnakingSpeed: 200\n\t\t\t} );\n\t\t\troute.addLayer( marker ).addLayer( line );\n\t\t}\n\t\tif ( arr_l.length == 1 ) {\n\t\t\t\tvar marker2 = L.marker( arr_m[i], {\n\t\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'+\n\t\t\t\t\t\t\t\t'<span class=\"map__marker__label\">'+arr_c[i]+'</span>'\n\t\t\t\t\t\t\t})\n\t\t\t\t} );\n\t\t\t\tmarker2.bindPopup(arr_c[i]);\n\t\t\troute.addLayer( marker2 );\n\t\t}\n\t}\n\treturn route;\n};\n\nfunction getQueryTag( data, option ) {\n\tvar tag = document.createElement('a'),\n\titem = document.createElement('li'),\n\ttext = document.createTextNode( data.name );\n\ttag.setAttribute( 'data-term_id',data.id );\n\ttag.setAttribute( 'data-slug',data.slug );\n\ttag.setAttribute( 'data-tax',data.tax );\n\ttag.setAttribute( 'title',data.name );\n\ttag.setAttribute( 'href','#' );\n\ttag.addEventListener('click',function( event ) {\n\t\tevent.preventDefault();\n\t\toption.removeAttr('selected');\n\t\tconsole.log(option);\n\t\tthis.remove();\n\t})\n\ttag.className = 'tag query-tag' + ' ' + data.tax;\n\ttag.appendChild(text);\n\titem.appendChild(tag);\n\treturn item;\n}\n\nfunction fetchCollaborationsQuery() {\n\talert('called');\n\tvar tags = jQuery('.archive__filter__query-tags').find('a.tag');\n\tconsole.log(tags);\n\tvar filters = {\n\t\t'object' : 'collaborations',\n\t};\n\tif ( tags.length ) {\n\t\tfor ( var i = 0; i < tags.length; i++ ) {\n\t\t\tvar k = tags[i].data('tax'),\n\t\t\tv = tags[i].data('slug');\n\t\t\tif ( ( typeof k === 'string' || k instanceof String )\n\t\t\t \t&& ( typeof v === 'string' || v instanceof String ) ) {\n\t\t\t\tfilters.taxquery[k] = v;\n\t\t\t}\n\t\t}\n\t\ttaxquery = filters.taxquery,\n\t\tqueryFilters = '';\n\t\tif ( isEmpty(taxquery) ) {\n\t\t\tthrow new Error(\"No filters given\");\n\t\t}\n\t\tfor (var key in taxquery) {\n\t\t\tif (taxquery.hasOwnProperty(key)) {\n\t\t\t\tqueryFilters += '&filter[' + key + ']=' + taxquery[key];\n\t\t\t}\n\t\t}\n\t\tvar restFilters = '?filter[post_status]=publish' + queryFilters + '&filter[orderby]=date&filter[order]=desc',\n\t\trestBase = '/wp-json/wp/v2/' + filters.object,\n\t\trestUrl = baseUrl + restBase + restFilters;\n\t\tconsole.log( restUrl );\n\t\treturn restUrl;\n\t}\n\tconsole.log( filters );\n}\n\nfunction fetchCollaborations() {\n\tvar restUrl = fetchCollaborationsQuery();\n\tif ( restUrl !== null ) {\n\t\tjQuery.when(\n\t\t\tjQuery.ajax({\n\t\t\t\turl: restUrl,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tcrossDomain: true,\n\t\t\t\tcontentType: 'application/json',\n\t\t\t})\n\t\t).then(\n\t\t\tfunction( data, status, request ) {\n\t\t\t\t// console.log( 'X-WP-Total: ' + request.getResponseHeader('X-WP-Total') );\n\t\t\t\t// console.log( 'X-WP-TotalPages: ' + request.getResponseHeader('X-WP-TotalPages') );\n\t\t\t\tvar dataLength = data.length,\n\t\t\t\tcollection = [];\n\t\t\t\tfor ( var k = 0; k < dataLength; k++ ) {\n\t\t\t\t\tcollection.push( data[k].exchange_basics.data );\n\t\t\t\t}\n\t\t\t\tcollectionLength = collection.length;\n\t\t\t\tfor ( var l = 0; l < collectionLength; l++ ) {\n\t\t\t\t\tvar route = prepareCollaborationMarkers( collection[l] );\n\t\t\t\t\tconsole.log( route );\n\t\t\t\t\troute.addTo( map );\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t}\n}\n\nfunction prepareCollaborationMarkers( obj ) {\n\tvar locations = [],\n\tmarkers = [],\n\tcities = [],\n\tlines = [];\n\tif ( isEmpty( obj.locations ) ) {\n\t\tthrow new Error('no locations found');\n\t}\n\tfor (var participant_id in obj.locations ) {\n\t\tif ( obj.locations.hasOwnProperty(participant_id) ) {\n\t\t\tvar participant = obj.locations[participant_id],\n\t\t\tlatlngs = []\n\t\t\tif ( jQuery.isNumeric( participant.org_lat ) ) {\n\t\t\t\tlatlngs.push( participant.org_lat );\n\t\t\t}\n\t\t\tif ( jQuery.isNumeric( participant.org_lng ) ) {\n\t\t\t\tlatlngs.push( participant.org_lng );\n\t\t\t}\n\t\t\tif ( latlngs.length == 2 ) {\n\t\t\t\tlocations.push( latlngs );\n\t\t\t}\n\t\t\tif ( '' != participant.org_city ) {\n\t\t\t\tcities.push( participant.org_city );\n\t\t\t}\n\t\t}\n\t}\n\tvar length = locations.length;\n\t// Adding markers and lines to their respective arrays.\n\tfor ( var j = 0; j < length; j++ ) {\n\t\tmarkers.push( locations[j] );\n\t\tif ( j === length - 1 ) {\n\t\t\tif ( length > 2 ) {\n\t\t\t\tlines.push( [ locations[j], locations[0] ] );\n\t\t\t}\n\t\t} else {\n\t\t\tlines.push( [ locations[j], locations[j+1] ] );\n\t\t}\n\t}\n\tif ( length == 2 ) {\n\t\tmarkers.push( locations[1] );\n\t}\n\tvar route = createRoute(markers,lines,cities);\n\treturn route;\n\n}\n\njQuery(document).foundation();\n/*\nThese functions make sure WordPress\nand Foundation play nice together.\n*/\n\njQuery(document).ready(function() {\n\n\t// var baseUrl = location.origin;\n\t//\n\t// if (! location.origin) {\n\t// \tbaseUrl = location.protocol + \"//\" + location.host;\n\t// }\n\t//\n\t// if ( location.origin == 'http://localhost' ) {\n\t//   baseUrl = location.origin + \"/tandem\";\n //  \t}\n\n\tvar focus_img_containers = document.querySelectorAll('.focus');\n\tfor ( var i = 0; i < focus_img_containers.length; i++ ) {\n  \t\tvar img_container = focus_img_containers[i];\n\t\timg = img_container.getElementsByClassName('image--main')[0];\n\t\tif ( ! img.classList.contains( 'lazy' ) ) {\n\t\t\t//console.log('no lazy image detected');\n\t\t\tdoFocusTranslate( img );\n\t\t}\n\t}\n\n\tvar floated_elements = document.querySelectorAll('.floated');\n\tfor (var j = 0; j < floated_elements.length; j++ ) {\n\t\tvar equal_element = floated_elements[j].nextElementSibling,\n\t\th = floated_elements[j].offsetHeight,\n\t\tequal_h = equal_element.offsetHeight;\n\t\t// console.log( floated_elements[j] );\n\t\t// console.log( equal_element );\n\t\t// console.log( 'neighbour: ' + equal_h + ' px');\n\t\tif ( h > equal_h ) {\n\t\t\tequal_element.style.height = h + 'px';\n\t\t}\n\t}\n\n/* \tjQuery('#gform_6 #input_6_7').change(function(){\n    var attendees = jQuery(this).val();\n    gfRepeater_setRepeater(6, 1, attendees);\n}); */\n\n\tjQuery('.translatedparagraph--has_translations').each( function() {\n\t\tvar select = jQuery( this ).find('.translation-select');\n\t\tselect.on('change', function() {\n\t\t\tvar lang = 'paragraph--' + this.value;\n\t\t\tfunction doLanguageSwitch( lang ) {\n\t\t\t\treturn function( index, element) {\n\t\t\t\t\tjQuery( this ).removeClass('show');\n\t\t\t\t\tif ( jQuery( this ).hasClass( lang ) ) {\n\t\t\t\t\t\tjQuery( this ).addClass('show');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar wrapper = jQuery( this ).parent().parent('.translatedparagraph--has_translations');\n\t\t\tparagraphs = wrapper.children('.translatedparagraph__paragraph');\n\t\t\tparagraphs.each( doLanguageSwitch( lang ) );\n\t\t});\n\t});\n\n\tjQuery('.image--main').each( function() {\n\t\tconsole.log( jQuery(this).height() );\n\t});\n\n    // Remove empty P tags created by WP inside of Accordion and Orbit\n    jQuery('.accordion p:empty, .orbit p:empty').remove();\n\n\t // Makes sure last grid item floats left\n\tjQuery('.archive__grid .columns', 'relatedgrid .columns').last().addClass( 'end' );\n\n\t// Adds Flex Video to YouTube and Vimeo Embeds\n\tjQuery('iframe[src*=\"youtube.com\"], iframe[src*=\"vimeo.com\"]').each(function() {\n\t\tif ( jQuery(this).innerWidth() / jQuery(this).innerHeight() > 1.5 ) {\n\t\t  jQuery(this).wrap(\"<div class='widescreen flex-video'/>\");\n\t\t} else {\n\t\t  jQuery(this).wrap(\"<div class='flex-video'/>\");\n\t\t}\n\t});\n\n  // Archive functions\n\tif ( jQuery('body').hasClass('archive') ) {\n\t\tvar $archiveGrid = jQuery('.archive__grid').masonry({\n\t\t  \"itemSelector\": \".archive__grid__griditem\"\n\t\t});\n\n\t\tjQuery('.archive__filter__button').each(function() {\n\t\t\tjQuery(this).on('click', function() {\n\t\t\t\tvar tax = jQuery(this).data('tax'),\n\t\t\t\ttermList = jQuery(this).parent().find('.archive__filter__datalist'),\n\t\t\t\tterm = termList.val();\n\t\t\t\tif ( term !== null && term !== undefined && term !== '' ) {\n\t\t\t\t\tvar termOption = jQuery('.archive__filter').find('.archive__filter__tax-datalist[data-tax=' + tax + ']').find('option[value=\"' + term + '\"]:not(:selected)');\n\t\t\t\t\tif ( termOption.length ) {\n\t\t\t\t\t\tvar termData = termOption.data();\n\t\t\t\t\t\ttermData.name = term;\n\t\t\t\t\t\ttermData.tax = tax;\n\t\t\t\t\t\t// Pass term option element object, so it can be removed on click\n\t\t\t\t\t\tvar tag = getQueryTag(termData, termOption);\n\t\t\t\t\t\tjQuery('.archive__filter__query-tags ul').append( tag );\n\t\t\t\t\t\ttermOption.attr('selected','selected');\n\n\t\t\t\t\t}\n\t\t\t\t\ttermList.val('');\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tjQuery('.archive__button').on('click',function( e ) {\n\t\t\te.preventDefault();\n\t\t\tvar $moreButton = jQuery(this),\n\t\t\tpaged = $moreButton.data('paged'),\n\t\t\tmax_num_pages = $moreButton.data('max_num_pages'),\n\t\t\tobject = $moreButton.data('object'),\n\t\t\tposts_per_page = $moreButton.data('posts_per_page'),\n\t\t\ttax_query = $moreButton.data('tax_query');\n\t\t\tif ( tax_query ) {\n\t\t\t\trestBase = '/wp-json/exchange/v1/' + object + '/' + tax_query;\n\t\t\t\tfilters = '?page=' + ( paged + 2 ) + '&posts_per_page=' + posts_per_page;\n\t\t\t} else {\n\t\t\t\trestBase = '/wp-json/wp/v2/' + object;\n\t\t\t\tfilters = '?filter[post_status]=publish&filter[posts_per_page]=' + posts_per_page + '&page=' + ( paged + 2 ) + '&filter[orderby]=date&filter[order]=desc';\n\t\t\t}\n\t\t\tvar restUrl = baseUrl + restBase + filters;\n\t\t\tif ( ( paged + 1 ) < max_num_pages ) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\turl: restUrl,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tcrossDomain: true,\n\t\t\t\t\tcontentType: 'application/json',\n\t\t\t\t\tsuccess: function( data, status, request ) {\n\t\t\t\t\t\t// console.log( 'X-WP-Total: ' + request.getResponseHeader('X-WP-Total') );\n\t\t\t\t\t\t// console.log( 'X-WP-TotalPages: ' + request.getResponseHeader('X-WP-TotalPages') );\n\t\t\t\t\t\tconsole.log( restUrl );\n\t\t\t\t\t\tvar pagelength = data.length,\n\t\t\t\t\t\t\titems = '';\n\t\t\t\t\t\tfor ( var i = 0; i < pagelength; i++ ) {\n\t\t\t\t\t\t\titems = items + data[i].exchange_basics.griditem;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar $items = jQuery( items );\n\t\t\t\t\t\t$archiveGrid.append( $items ).masonry( 'appended',$items ).masonry();\n\t\t\t\t\t\tpaged = paged + 1;\n\t\t\t\t\t\t$moreButton.data('paged', paged );\n\t\t\t\t\t\tif ( paged + 1 == max_num_pages ) {\n\t\t\t\t\t\t\t$moreButton.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function( error ) {\n\t\t\t\t\t\tconsole.log( error );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\tif ( jQuery('body').hasClass('post-type-archive-collaboration') ) {\n\n\t\tvar baseMapUrl = 'https://api.mapbox.com/styles/v1/retrorism/cio2pv2ft001ybvm8qb4da6f9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmV0cm9yaXNtjwiYSI6IlhRWTE0d2cifQ.-Wi_jReZU4Wz_owPnVZDwQ',\n\t\tbase = L.tileLayer(baseMapUrl, {subdomains: '1234'});\n\t\tmap = L.map('leaflet-archive-map',{\n\t\t\tlayers: [base],\n\t\t\tmaxZoom: 20,\n\t\t\tminZoom: 0,\n\t\t\tzoomControl: 1,\n\t\t\tscrollWheelZoom: 0,\n\t\t\tattributionControl: false\n\t\t}).setView([48, 16], 4);\n\t\tvar attControl = L.control.attribution({prefix:false}).addTo(map);attControl.addAttribution('Tiles Courtesy of <a href=\"http://www.mapbox.com/\" target=\"_blank\">MapBox</a> © <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> contributors');\n\t\tfetchCollaborations();\n\t\t// route = createRoute([[41.0082376,28.9783589],[45.8609375,25.7885796],[45.8609375,25.7885796]],[[[41.0082376,28.9783589],[45.8609375,25.7885796]]],[\"Istanbul\",\"Sfantu Gheorghe\",\"\"]);\n\t\t// route.bindPopup('<a class=\\\"\\\" href=\\\"http://localhost/tandem/collaborations/looking-forat-the-invisible/\\\" title=\\\"Navigate to Looking For/At The Invisible\\\">Looking For/At The Invisible</a>');\n\t\t// route.addTo( map );\n\t\t// map.fitBounds( route.getBounds().pad(0.033) );\n\t\t// route.snakeIn();\n\t}\n\n\n});\n","jQuery(document).foundation();"],"sourceRoot":"/source/"}