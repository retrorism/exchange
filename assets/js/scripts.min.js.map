{"version":3,"sources":["wp-foundation.js","exchange.js","init-foundation.js"],"names":["handleScroll","previousScroll","pageYOffset","jQuery","window","scroll","currentScroll","this","scrollTop","removeClass","addClass","getUrlVars","hash","vars","hashes","location","href","slice","indexOf","split","i","length","push","getFocusTranslate","img_placeholder","img","img_data","parentNode","dataset","h","clientHeight","container_h","offsetHeight","px_translate","focus_h","max_translate","translate","doFocusTranslate","translateNeg","transform","setAttribute","document","foundation","doc","body","documentElement","style","webkitFlexWrap","msFlexWrap","flexWrap","className","ready","each","find","on","e","target","floated_elements","querySelectorAll","ii","equal_element","nextElementSibling","equal_h","height","preventDefault","id","data","targetjQ","prop","selection","grid","prToken","undefined","action","update_id","val","prid","token","security","remove","html","ajax","url","exchange_ajax","ajax_url","method","done","response","removeProp","select","doLanguageSwitch","lang","index","element","hasClass","value","wrapper","parent","paragraphs","children","last","innerWidth","innerHeight","wrap"],"mappings":"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","file":"scripts.min.js","sourcesContent":["var doc = document.body || document.documentElement;\nvar style = doc.style;\t\n\nif ( style.webkitFlexWrap === '' || style.msFlexWrap === '' || style.flexWrap === '' ) { \n    doc.className += \" supports-flex\";\n}\n\nfunction handleScroll() {\n\tvar previousScroll = pageYOffset;\n\tjQuery(window).scroll(function(){\n\t\tvar currentScroll = jQuery(this).scrollTop();\n\t\tif (currentScroll > previousScroll){\n\t\t} else {\n\t\t}\n\t\tpreviousScroll = currentScroll;\n\t\tif ( pageYOffset < 100 ) {\n\t\t\tjQuery('.breadcrumbs-bar').removeClass('scrolled');\n\t\t} else {\n\t\t\tjQuery('.breadcrumbs-bar').addClass('scrolled');\n\t\t}\n\n\t});\n}\n\nfunction getUrlVars() {\n    var vars = [], hash;\n    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n    for(var i = 0; i < hashes.length; i++)\n    {\n        hash = hashes[i].split('=');\n        vars.push(hash[0]);\n        vars[hash[0]] = hash[1];\n    }\n    return vars;\n}\n\njQuery(document).ready(function() {\n\n\tjQuery('.focus').each(function() {\n\t\tvar img = jQuery(this).find('.image--main');\n\t\timg.on('load', function(e){\n\t\t\tdoFocusTranslate(e.target);\n\t\t});\n\t})\n\n\tvar floated_elements = document.querySelectorAll('.floated');\n\tfor (var ii = 0; ii < floated_elements.length; ii++ ) {\n\t\tvar equal_element = floated_elements[ii].nextElementSibling,\n\t\th = floated_elements[ii].offsetHeight,\n\t\tequal_h = equal_element.offsetHeight;\n\t\tif ( h > equal_h ) {\n\t\t\tequal_element.style.height = h + 'px';\n\t\t}\n\t}\n\n\tjQuery( 'a[data-open=story__modal--gallery]' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\tvar id = jQuery(this).data('img_id'),\n\t\ttargetjQ = jQuery('#story__modal--gallery').find('#' + id);\n\t\tjQuery('.orbit').foundation( 'changeSlide', true, targetjQ );\n\t})\n\n\tjQuery( '#token-form__submit' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\tjQuery(this).prop('disabled',true);\n\t\tvar selection = jQuery( '.token-form__collab-select option:selected' ),\n\t\tgrid = jQuery('.grid--form-options'),\n\t\tprToken = getUrlVars()['pr'];\n\t\tif ( undefined !== selection ) {\n\t\t\tvar data = {\n\t\t\t\t\taction: 'exchange_token_form',\n\t\t\t\t\tupdate_id : selection.val(),\n\t\t\t\t\tprid : selection.data('programme-round'),\n\t\t\t\t\ttoken : prToken,\n\t\t\t\t\tsecurity : jQuery( '.token-form__nonce' ).val()\n\t\t\t};\n\t\t\tjQuery('.loader-pointer').remove();\n\t\t\tjQuery('.loader-wrapper').addClass('go');\n\t\t\tgrid.html('');\n\t\t\tjQuery.ajax( {\n\t\t\t\t'url':    exchange_ajax.ajax_url,\n\t\t\t\t'method': 'POST',\n\t\t\t\t'data':   data\n\t\t\t} ).done( function ( response ) {\n\t\t\t\tgrid.html( response );\n\t\t\t\tjQuery('.loader-wrapper').removeClass('go');\n\t\t\t\tjQuery(this).removeProp('disabled');\n\n\t\t\t} );\n\t\t};\n\t} );\n\n\n\tjQuery('.translatedparagraph--has_translations').each( function() {\n\t\tvar select = jQuery( this ).find('.translation-select');\n\t\tselect.on('change', function() {\n\t\t\tvar lang = 'paragraph--' + this.value;\n\t\t\tfunction doLanguageSwitch( lang ) {\n\t\t\t\treturn function( index, element) {\n\t\t\t\t\tjQuery( this ).removeClass('show');\n\t\t\t\t\tif ( jQuery( this ).hasClass( lang ) ) {\n\t\t\t\t\t\tjQuery( this ).addClass('show');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar wrapper = jQuery( this ).parent().parent('.translatedparagraph--has_translations');\n\t\t\tparagraphs = wrapper.children('.translatedparagraph__paragraph');\n\t\t\tparagraphs.each( doLanguageSwitch( lang ) );\n\t\t});\n\t});\n\n\tif ( jQuery('body').hasClass('single') || jQuery('body').hasClass('page-child') ) {\n\t\tjQuery('#main').on('scrollme.zf.trigger',handleScroll);\n\t}\n\n\n\t/*\n\tThese functions make sure WordPress\n\tand Foundation play nice together.\n\t*/\n\t// Remove empty P tags created by WP inside of Accordion and Orbit\n\tjQuery('.accordion p:empty, .orbit p:empty').remove();\n\n\t// Makes sure last grid item floats left\n\tjQuery('.archive__grid .columns', 'relatedgrid .columns').last().addClass( 'end' );\n\n\t// Adds Flex Video to YouTube and Vimeo Embeds\n\tjQuery('iframe[src*=\"youtube.com\"], iframe[src*=\"vimeo.com\"]').each(function() {\n\t\tif ( jQuery(this).innerWidth() / jQuery(this).innerHeight() > 1.5 ) {\n\t\t\tjQuery(this).wrap(\"<div class='widescreen flex-video'/>\");\n\t\t} else {\n\t\t\tjQuery(this).wrap(\"<div class='flex-video'/>\");\n\t\t}\n\t});\n\n});\n","var getFocusTranslate = function( img_placeholder, img ) {\n\timg_data = img_placeholder.parentNode.dataset;\n\tif ( ! img_data ) {\n\t\treturn false;\n\t}\n\tvar h = img.clientHeight,\n\tcontainer_h =  img_placeholder.offsetHeight,\n\tpx_translate = ( img_data.focus_h * h ) - ( container_h / 2 ),\n\tmax_translate = ( ( h - container_h ) / h ) * 100,\n\ttranslate = ( px_translate / h ) * 100;\n\n\t//If the center of the container is below the focus point, don't move.\n\t//Or: if the translation is downwards, don't move (we're working from top).\n\tif ( px_translate < 0 || translate < 0 ) {\n\t\treturn false;\n\t}\n\n\tif ( translate > max_translate ) {\n\t\treturn max_translate;\n\t} else {\n\t\treturn translate;\n\t}\n};\n\nvar doFocusTranslate = function( img ) {\n\tvar img_placeholder = img.parentNode;\n\ttranslate = getFocusTranslate( img_placeholder, img );\n\t// Keep the negative, add minus if necessary\n\tif ( translate ) {\n\t\tvar translateNeg = translate > 0 ? -1 * translate : translate,\n\t\ttransform = 'transform: translateY(' + translateNeg + '%);';\n\t\timg.setAttribute( 'style', transform );\n\t}\n};\n","jQuery(document).foundation();"],"sourceRoot":"/source/"}