{"version":3,"sources":["wp-foundation.js","init-foundation.js"],"names":["isEmpty","obj","length","key","hasOwnProperty","call","handleScroll","previousScroll","pageYOffset","jQuery","window","scroll","currentScroll","this","scrollTop","removeClass","addClass","createRoute","arr_m","arr_l","arr_c","iconUrl","leaflet_vars","markerUrl","route","L","icon","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","featureGroup","snakingPause","i","marker","DivIcon","className","html","line","polyline","color","yellowTandem","weight","opacity","dashArray","lineJoin","snakingSpeed","addLayer","marker2","bindPopup","fetchCollaborationsQuery","tags","find","filters","object","taxquery","tag","k","data","v","String","mapInitial","post_tag","getRandomProgrammeRound","queryFilters","restFilters","restBase","restUrl","baseUrl","prepareCollaborationMarkers","console","log","locations","markers","cities","lines","collab","name","title","link","participant_id","participant","latlngs","isNumeric","org_lat","push","org_lng","org_city","j","createArchiveRoute","getUrlVars","hash","vars","hashes","location","href","slice","indexOf","split","termOptions","randomTotal","randomN","Math","floor","random","prog","loadMap","baseMapUrl","base","tileLayer","subdomains","undefined","map","layers","maxZoom","minZoom","zoomControl","scrollWheelZoom","attributionControl","setView","attControl","control","attribution","prefix","addTo","addAttribution","fetchCollaborations","loadGrid","removeLayer","routeLayer","when","ajax","url","method","crossDomain","contentType","then","status","request","dataLength","collection","exchange_basics","collectionLength","routes","l","fitBounds","getBounds","pad","getQueryTag","option","tax","document","createElement","item","text","createTextNode","setAttribute","id","slug","addEventListener","event","preventDefault","removeAttr","parentNode","remove","appendChild","getFocusTranslate","img_placeholder","img","img_data","dataset","h","offsetHeight","container_h","px_translate","focus_h","max_translate","translate","doFocusTranslate","translateNeg","transform","foundation","Object","prototype","origin","protocol","host","ready","focus_img_containers","querySelectorAll","img_container","getElementsByClassName","classList","contains","floated_elements","ii","equal_element","nextElementSibling","equal_h","style","height","on","e","target","prop","selection","grid","prToken","action","update_id","val","prid","token","security","exchange_ajax","ajax_url","done","response","removeProp","each","select","doLanguageSwitch","lang","index","element","hasClass","value","wrapper","parent","paragraphs","children","last","innerWidth","innerHeight","wrap","alert","$archiveGrid","masonry","itemSelector","termList","term","termOption","termData","tagBox","empty","append","attr","$moreButton","paged","max_num_pages","posts_per_page","tax_query","success","pagelength","items","griditem","$items","hide","error","toggle","toggleID","animate"],"mappings":"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","file":"scripts.min.js","sourcesContent":["// Speed up calls to hasOwnProperty\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\nbaseUrl = location.origin,\nmapInitial = 1,\nmap,\nrouteLayer;\n\nif (! location.origin) {\n\tbaseUrl = location.protocol + \"//\" + location.host;\n}\n\nif ( location.origin == 'http://localhost' ) {\n  baseUrl = location.origin + \"/tandem\";\n}\n\nfunction isEmpty(obj) {\n    if (obj == null) {\n\t\treturn true;\n\t}\n    if (obj.length > 0) {\n\t\treturn false;\n\t}\n    if (obj.length === 0) {\n\t\treturn true;\n\t}\n    if (typeof obj !== \"object\") {\n\t\treturn true;\n\t}\n    for (var key in obj) {\n        if (hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n    }\n    return true;\n}\n\nfunction handleScroll() {\n\tvar previousScroll = pageYOffset;\n\tjQuery(window).scroll(function(){\n\t\tvar currentScroll = jQuery(this).scrollTop();\n\t\tif (currentScroll > previousScroll){\n\t\t\t//console.log('down');\n\t\t} else {\n\t\t\t//console.log('up');\n\t\t}\n\t\tpreviousScroll = currentScroll;\n\t\tif ( pageYOffset < 100 ) {\n\t\t\t//console.log( 'hiding' );\n\t\t\tjQuery('.breadcrumbs-bar').removeClass('scrolled');\n\t\t} else {\n\t\t\t//console.log( 'showing' );\n\t\t\tjQuery('.breadcrumbs-bar').addClass('scrolled');\n\t\t}\n\n\t});\n}\n\nfunction createRoute(arr_m,arr_l,arr_c) {\n\tvar iconUrl = leaflet_vars.markerUrl,\n\texchange_icon = L.icon({\n\t\ticonUrl: iconUrl,\n\t\ticonSize:     [14, 14], // size of the icon\n\t\tshadowSize:   [0, 0], // size of the shadow\n\t\ticonAnchor:   [7, 7], // point of the icon which will correspond to marker's location\n\t\tshadowAnchor: [4, 62],  // the same for the shadow\n\t\tpopupAnchor:  [0, 0] // point from which the popup should open relative to the iconAnchor\n\t}),\n\troute = L.featureGroup({snakingPause: 500 });\n\tif ( arr_m.length > 0 && arr_l.length > 0 ) {\n\t\tfor ( i = 0; i < arr_l.length; i++ ) {\n\t\t\tvar marker = L.marker( arr_m[i], {\n\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'+\n\t\t\t\t\t\t\t'<span class=\"map__marker__label\">'+arr_c[i]+'</span>'\n\t\t\t\t\t\t})\n\t\t\t});\n\t\t\tvar line = L.polyline( arr_l[i], {\n\t\t\t\tcolor : leaflet_vars.yellowTandem,\n\t\t\t\tclassName: 'map__line',\n\t\t\t\tweight : 6,\n\t\t\t\topacity : 0.9,\n\t\t\t\tdashArray : '12, 10',\n\t\t\t\tlineJoin: 'round',\n\t\t\t\tsnakingSpeed: 200\n\t\t\t} );\n\t\t\troute.addLayer( marker ).addLayer( line );\n\t\t}\n\t\tif ( arr_l.length == 1 ) {\n\t\t\t\tvar marker2 = L.marker( arr_m[i], {\n\t\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'+\n\t\t\t\t\t\t\t\t'<span class=\"map__marker__label\">'+arr_c[i]+'</span>'\n\t\t\t\t\t\t\t})\n\t\t\t\t} );\n\t\t\t\tmarker2.bindPopup(arr_c[i]);\n\t\t\troute.addLayer( marker2 );\n\t\t}\n\t}\n\treturn route;\n};\n\nfunction fetchCollaborationsQuery() {\n\tvar tags = jQuery('.archive__filter__query-tags').find('a.tag');\n\tvar filters = {\n\t\t'object' : 'collaborations',\n\t\t'taxquery': {},\n\t};\n\tif ( tags.length ) {\n\t\tfor ( var i = 0; i < tags.length; i++ ) {\n\t\t\tvar tag = jQuery( tags[i] );\n\t\t\tvar k = tag.data('tax'),\n\t\t\tv = tag.data('slug');\n\t\t\tif ( ( typeof k === 'string' || k instanceof String )\n\t\t\t\t&& ( typeof v === 'string' || v instanceof String ) ) {\n\t\t\t\tfilters.taxquery[k] = v;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ( mapInitial == 1 ) {\n\t\t\tvar post_tag = getRandomProgrammeRound();\n\t\t\tfilters.taxquery = {\n\t\t\t\t'tag' : post_tag\n\t\t\t}\n\t\t\tmapInitial = 0;\n\t\t}\n\t}\n\tvar queryFilters = '',\n\ttaxquery = filters.taxquery;\n\tif ( isEmpty(taxquery) ) {\n\t\treturn null;\n\t} else {\n\t\tfor (var key in filters.taxquery) {\n\t\t\tif (taxquery.hasOwnProperty(key)) {\n\t\t\t\tqueryFilters += '&filter[' + key + ']=' + taxquery[key];\n\t\t\t}\n\t\t}\n\t\tvar restFilters = '?filter[post_status]=publish' + queryFilters + '&filter[orderby]=date&filter[order]=desc',\n\t\trestBase = '/wp-json/wp/v2/' + filters.object,\n\t\trestUrl = baseUrl + restBase + restFilters;\n\t\treturn restUrl;\n\t}\n}\n\nfunction prepareCollaborationMarkers( obj ) {\n\tconsole.log( obj );\n\tvar locations = [],\n\tmarkers = [],\n\tcities = [],\n\tlines = [],\n\tcollab = {\n\t\t'name' : obj.title,\n\t\t'link' : obj.link\n\t};\n\tif ( isEmpty( obj.locations ) ) {\n\t\treturn null;\n\t}\n\tfor (var participant_id in obj.locations ) {\n\t\tif ( obj.locations.hasOwnProperty(participant_id) ) {\n\t\t\tvar participant = obj.locations[participant_id],\n\t\t\tlatlngs = []\n\t\t\tif ( jQuery.isNumeric( participant.org_lat ) ) {\n\t\t\t\tlatlngs.push( participant.org_lat );\n\t\t\t}\n\t\t\tif ( jQuery.isNumeric( participant.org_lng ) ) {\n\t\t\t\tlatlngs.push( participant.org_lng );\n\t\t\t}\n\t\t\tif ( latlngs.length == 2 ) {\n\t\t\t\tlocations.push( latlngs );\n\t\t\t}\n\t\t\tif ( '' != participant.org_city ) {\n\t\t\t\tcities.push( participant.org_city );\n\t\t\t}\n\t\t}\n\t}\n\tvar length = locations.length;\n\t// Adding markers and lines to their respective arrays.\n\tfor ( var j = 0; j < length; j++ ) {\n\t\tmarkers.push( locations[j] );\n\t\tif ( j === length - 1 ) {\n\t\t\tif ( length > 2 ) {\n\t\t\t\tlines.push( [ locations[j], locations[0] ] );\n\t\t\t}\n \t\t} else {\n\t\t\tlines.push( [ locations[j], locations[j+1] ] );\n\t\t}\n\t}\n\tif ( length == 2 ) {\n\t\tmarkers.push( locations[1] );\n\t}\n\tvar route = createArchiveRoute(collab,markers,lines,cities);\n\treturn route;\n}\n\nfunction createArchiveRoute(collab,arr_m,arr_l,arr_c) {\n\tvar iconUrl = leaflet_vars.markerUrl,\n\texchange_icon = L.icon({\n\t\ticonUrl: iconUrl,\n\t\ticonSize:     [14, 14], // size of the icon\n\t\tshadowSize:   [0, 0], // size of the shadow\n\t\ticonAnchor:   [7, 7], // point of the icon which will correspond to marker's location\n\t\tshadowAnchor: [4, 62],  // the same for the shadow\n\t\tpopupAnchor:  [0, 0] // point from which the popup should open relative to the iconAnchor\n\t}),\n\troute = L.featureGroup({snakingPause: 500 });\n\tif ( arr_m.length > 0 && arr_l.length > 0 ) {\n\t\tfor ( i = 0; i < arr_l.length; i++ ) {\n\t\t\tvar marker = L.marker( arr_m[i], {\n\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'\n\t\t\t\t\t\t})\n\t\t\t});\n\t\t\tvar line = L.polyline( arr_l[i], {\n\t\t\t\tcolor : leaflet_vars.yellowTandem,\n\t\t\t\tclassName: 'map__line',\n\t\t\t\tweight : 6,\n\t\t\t\topacity : 0.9,\n\t\t\t\tdashArray : '12, 10',\n\t\t\t\tlineJoin: 'round',\n\t\t\t\tsnakingSpeed: 200\n\t\t\t} );\n\t\t\troute.addLayer( marker ).addLayer( line );\n\t//console.log('up');\n\t \t\t}\n\t\tif ( arr_l.length == 1 ) {\n\t\t\t\tvar marker2 = L.marker( arr_m[i], {\n\t\t\t\t\ticon : new L.DivIcon({\n\t\t\t\t\t\tclassName: 'map__marker',\n\t\t\t\t\t\thtml:   '<img class=\"map__marker__image\" src=\"' + iconUrl + '\">'\n\t\t\t\t\t\t\t})\n\t\t\t\t} );\n\t\t\t\tmarker2.bindPopup(arr_c[i]);\n\t\t\troute.addLayer( marker2 );\n\t\t}\n\t\troute.bindPopup('<a href=\"' + collab.link + '\">' + collab.name + '</a>');\n\t}\n\treturn route;\n}\n\nfunction getUrlVars() {\n    var vars = [], hash;\n    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n    for(var i = 0; i < hashes.length; i++)\n    {\n        hash = hashes[i].split('=');\n        vars.push(hash[0]);\n        vars[hash[0]] = hash[1];\n    }\n    return vars;\n}\n\nfunction getRandomProgrammeRound() {\n\tvar termOptions = jQuery('.archive__filter').find('.archive__filter__tax-datalist[data-tax=tag]').find('option');\n\tif ( termOptions.length ) {\n\t\tvar randomTotal = termOptions.length,\n\t\trandomN = Math.floor(Math.random() * randomTotal);\n\t\tconsole.log(randomN);\n\t\tprog = jQuery( termOptions[randomN] );\n\t\treturn prog.data('slug');\n\t}\n}\n\nfunction loadMap() {\n\tvar baseMapUrl = 'https://api.mapbox.com/styles/v1/retrorism/cio2pv2ft001ybvm8qb4da6f9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmV0cm9yaXNtIiwiYSI6IlhRWTE0d2cifQ.-Wi_jReZU4Wz_owPnVZDwQ',\n\tbase = L.tileLayer(baseMapUrl, {subdomains: '1234'});\n\tif ( map == undefined ) {\n\t\tmap = L.map('leaflet-archive-map',{\n\t\t\tlayers: [base],\n\t\t\tmaxZoom: 20,\n\t\t\tminZoom: 0,\n\t\t\tzoomControl: 1,\n\t\t\tscrollWheelZoom: 0,\n\t\t\tattributionControl: false\n\t\t}).setView([48, 16], 4);\n\t\tvar attControl = L.control.attribution({prefix:false}).addTo(map);attControl.addAttribution('Tiles Courtesy of <a href=\"http://www.mapbox.com/\" target=\"_blank\">MapBox</a> © <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> contributors');\n\t}\n\tfetchCollaborations();\n}\n\nfunction loadGrid() {\n\tconsole.log( 'grid loaded' );\n}\n\nfunction fetchCollaborations() {\n\tvar restUrl = fetchCollaborationsQuery();\n\tif ( restUrl === null ) {\n\t\tconsole.log( 'emptying map' );\n\t\tmap.removeLayer(routeLayer);\n\t} else {\n\t\tconsole.log('called with ' + restUrl );\n\t\tjQuery.when(\n\t\t\tjQuery.ajax({\n\t\t\t\turl: restUrl,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tcrossDomain: true,\n\t\t\t\tcontentType: 'application/json',\n\t\t\t})\n\t\t).then(\n\t\t\tfunction( data, status, request ) {\n\t\t\t\t// console.log( 'X-WP-Total: ' + request.getResponseHeader('X-WP-Total') );\n\t\t\t\t// console.log( 'X-WP-TotalPages: ' + request.getResponseHeader('X-WP-TotalPages') );\n\t\t\t\tvar dataLength = data.length,\n\t\t\t\tcollection = [];\n\t\t\t\tif ( dataLength > 0 ) {\n\t\t\t\t\tfor ( var k = 0; k < dataLength; k++ ) {\n\t\t\t\t\t\tcollection.push( data[k].exchange_basics.data );\n\t\t\t\t\t}\n\t\t\t\t\tcollectionLength = collection.length;\n\t\t\t\t\troutes = [];\n\t\t\t\t\tfor ( var l = 0; l < collectionLength; l++ ) {\n\t\t\t\t\t\tvar route = prepareCollaborationMarkers( collection[l] );\n\t\t\t\t\t\tif ( route !== null ) {\n\t\t\t\t\t\t\troutes.push(route);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log( routes );\n\t\t\t\t\tif ( routeLayer !== undefined ) {\n\t\t\t\t\t\tmap.removeLayer(routeLayer);\n\t\t\t\t\t}\n\t\t\t\t\tif ( routes.length > 0 ) {\n\t\t\t\t\t\trouteLayer = L.featureGroup(routes).addTo(map);\n\t\t\t\t\t\tmap.fitBounds( routeLayer.getBounds().pad(0.033) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t}\n}\n\nfunction getQueryTag( data, option ) {\n\tconsole.log(data.tax);\n\tvar tag = document.createElement('a'),\n\titem = document.createElement('li'),\n\ttext = document.createTextNode( data.name );\n\ttag.setAttribute( 'data-term_id',data.id );\n\ttag.setAttribute( 'data-slug',data.slug );\n\ttag.setAttribute( 'data-tax',data.tax );\n\ttag.setAttribute( 'title',data.name );\n\ttag.setAttribute( 'href','#' );\n\ttag.addEventListener('click',function( event ) {\n\t\tevent.preventDefault();\n\t\toption.removeAttr('selected');\n\t\tthis.parentNode.remove();\n\t\tfetchCollaborations();\n\t})\n\ttag.className = 'tag query-tag' + ' ' + data.tax;\n\ttag.appendChild(text);\n\titem.appendChild(tag);\n\treturn item;\n}\n\nfunction getFocusTranslate( img_placeholder, img ) {\n\timg_data = img_placeholder.parentNode.dataset;\n\tif ( ! img_data ) {\n\t\treturn false;\n\t}\n\tvar h = img.offsetHeight,\n\tcontainer_h =  img_placeholder.offsetHeight,\n\tpx_translate = ( img_data.focus_h * h ) - ( container_h / 2 ),\n\tmax_translate = ( ( h - container_h ) / h ) * 100,\n\ttranslate = ( px_translate / h ) * 100;\n\n\t// console.log( 'image height: ' + h );\n\t// console.log( 'focus point on ' + ( img_data.focus_h * h ) );\n\t// console.log( 'container center ' + ( container_h / 2 ) );\n\t// console.log( 'number of pixels to move: ' + px_translate );\n\t// console.log( 'number of percents to move: ' + translate );\n\t// console.log( 'max percent to move: ' + max_translate );\n\t// If the center of the container is below the focus point, don't move.\n\t// Or: if the translation is downwards, don't move (we're working from top).\n\tif ( px_translate < 0 || translate < 0 ) {\n\t\t//alert( 'translation smaller than 0' );\n\t\treturn false;\n\t}\n\n\tif ( translate > max_translate ) {\n\t\treturn max_translate;\n\t} else {\n\t\treturn translate;\n\t}\n}\n\nfunction doFocusTranslate( img ) {\n\tvar img_placeholder = img.parentNode;\n\ttranslate = getFocusTranslate( img_placeholder, img );\n\t// Keep the negative, add minus if necessary\n\tif ( translate ) {\n\t\tvar translateNeg = translate > 0 ? -1 * translate : translate,\n\t\ttransform = 'transform: translateY(' + translateNeg + '%);';\n\t\timg.setAttribute( 'style', transform );\n\t}\n}\n\njQuery(document).ready(function() {\n\n\t// jQuery(document).on('open.zf.reveal', function() {\n\t// \tjQuery(document).foundation('orbit', 'reflow');\n\t// });\n\n\tvar focus_img_containers = document.querySelectorAll('.focus');\n\tfor ( var i = 0; i < focus_img_containers.length; i++ ) {\n\t\tvar img_container = focus_img_containers[i],\n\t\timg = img_container.getElementsByClassName('image--main')[0];\n\t\tif ( ! img.classList.contains( 'lazy' ) ) {\n\t\t\t//console.log('no lazy image detected');\n\t\t\tdoFocusTranslate( img );\n\t\t}\n\t}\n\n\tvar floated_elements = document.querySelectorAll('.floated');\n\tfor (var ii = 0; ii < floated_elements.length; ii++ ) {\n\t\tvar equal_element = floated_elements[ii].nextElementSibling,\n\t\th = floated_elements[ii].offsetHeight,\n\t\tequal_h = equal_element.offsetHeight;\n\t\t// console.log( floated_elements[ii] );\n\t\t// console.log( equal_element );\n\t\t// console.log( 'neighbour: ' + equal_h + ' px');\n\t\tif ( h > equal_h ) {\n\t\t\tequal_element.style.height = h + 'px';\n\t\t}\n\t}\n\n\tjQuery( 'a[data-open=story__modal--gallery]' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\tvar id = jQuery(this).data('img_id'),\n\t\ttarget = jQuery('#' + id);\n\t\tjQuery('.orbit').foundation( 'changeSlide', true, target );\n\t});\n\n\tjQuery( '#token-form__submit' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\tjQuery(this).prop('disabled',true);\n\t\tvar selection = jQuery( '.token-form__collab-select option:selected' ),\n\t\tgrid = jQuery('.grid--form-options'),\n\t\tprToken = getUrlVars()['pr'];\n\t\tif ( undefined !== selection ) {\n\t\t\tvar data = {\n\t\t\t\t\taction: 'exchange_token_form',\n\t\t\t\t\tupdate_id : selection.val(),\n\t\t\t\t\tprid : selection.data('programme-round'),\n\t\t\t\t\ttoken : prToken,\n\t\t\t\t\tsecurity : jQuery( '.token-form__nonce' ).val()\n\t\t\t};\n\t\t\tjQuery('.loader-pointer').remove();\n\t\t\tjQuery('.loader-wrapper').addClass('go');\n\t\t\tgrid.html('');\n\t\t\tjQuery.ajax( {\n\t\t\t\t'url':    exchange_ajax.ajax_url,\n\t\t\t\t'method': 'POST',\n\t\t\t\t'data':   data\n\t\t\t} ).done( function ( response ) {\n\t\t\t\tgrid.html( response );\n\t\t\t\tjQuery('.loader-wrapper').removeClass('go');\n\t\t\t\tjQuery(this).removeProp('disabled');\n\n\t\t\t} );\n\t\t};\n\t} );\n\n\n/* \tjQuery('#gform_6 #input_6_7').change(function(){\n    var attendees = jQuery(this).val();\n    gfRepeater_setRepeater(6, 1, attendees);\n}); */\n\n\tjQuery('.translatedparagraph--has_translations').each( function() {\n\t\tvar select = jQuery( this ).find('.translation-select');\n\t\tselect.on('change', function() {\n\t\t\tvar lang = 'paragraph--' + this.value;\n\t\t\tfunction doLanguageSwitch( lang ) {\n\t\t\t\treturn function( index, element) {\n\t\t\t\t\tjQuery( this ).removeClass('show');\n\t\t\t\t\tif ( jQuery( this ).hasClass( lang ) ) {\n\t\t\t\t\t\tjQuery( this ).addClass('show');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar wrapper = jQuery( this ).parent().parent('.translatedparagraph--has_translations');\n\t\t\tparagraphs = wrapper.children('.translatedparagraph__paragraph');\n\t\t\tparagraphs.each( doLanguageSwitch( lang ) );\n\t\t});\n\t});\n\n\tjQuery('.image--main').each( function() {\n\t\t//console.log( jQuery(this).height() );\n\t});\n\n\tif ( jQuery('body').hasClass('single') || jQuery('body').hasClass('page-child') ) {\n\t\tjQuery('#main').on('scrollme.zf.trigger',handleScroll);\n\t}\n\n\t// Remove empty P tags created by WP inside of Accordion and Orbit\n\tjQuery('.accordion p:empty, .orbit p:empty').remove();\n\n\t// Makes sure last grid item floats left\n\tjQuery('.archive__grid .columns', 'relatedgrid .columns').last().addClass( 'end' );\n\n\t// Adds Flex Video to YouTube and Vimeo Embeds\n\tjQuery('iframe[src*=\"youtube.com\"], iframe[src*=\"vimeo.com\"]').each(function() {\n\t\tif ( jQuery(this).innerWidth() / jQuery(this).innerHeight() > 1.5 ) {\n\t\t\tjQuery(this).wrap(\"<div class='widescreen flex-video'/>\");\n\t\t} else {\n\t\t\tjQuery(this).wrap(\"<div class='flex-video'/>\");\n\t\t}\n\t});\n\n\t// Archive functions\n\tif ( jQuery('body').hasClass('archive') ) {\n\t\talert('jup');\n\t\tvar $archiveGrid = jQuery('.masonry').masonry({\n\t\t  \"itemSelector\": \".archive__grid__griditem\"\n\t\t});\n\t\tjQuery('.archive__filter__button').each(function() {\n\t\t\tjQuery(this).on('click', function() {\n\t\t\t\tvar tax = jQuery(this).data('tax'),\n\t\t\t\ttermList = jQuery(this).parent().find('.archive__filter__datalist'),\n\t\t\t\tterm = termList.val();\n\t\t\t\tconsole.log(tax);\n\t\t\t\tconsole.log(term);\n\t\t\t\tif ( term !== null && term !== undefined && term !== '' ) {\n\t\t\t\t\tvar termOption = jQuery('.archive__filter').find('.archive__filter__tax-datalist[data-tax=' + tax + ']').find('option[value=\"' + term + '\"]:not(:selected)');\n\t\t\t\t\tif ( termOption.length ) {\n\t\t\t\t\t\tvar termData = termOption.data();\n\t\t\t\t\t\ttermData.name = term;\n\t\t\t\t\t\ttermData.tax = tax;\n\t\t\t\t\t\t// Pass term option element object, so it can be removed on click\n\t\t\t\t\t\tvar tag = getQueryTag(termData, termOption),\n\t\t\t\t\t\ttagBox = jQuery('.archive__filter__query-tags ul');\n\t\t\t\t\t\ttagBox.empty().append( tag );\n\t\t\t\t\t\ttermOption.attr('selected','selected');\n\t\t\t\t\t\tfetchCollaborations();\n\t\t\t\t\t}\n\t\t\t\t\ttermList.val('');\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t\tjQuery('.archive__button').on('click',function( e ) {\n\t\t\te.preventDefault();\n\t\t\tvar $moreButton = jQuery(this),\n\t\t\tpaged = $moreButton.data('paged'),\n\t\t\tmax_num_pages = $moreButton.data('max_num_pages'),\n\t\t\tobject = $moreButton.data('object'),\n\t\t\tposts_per_page = $moreButton.data('posts_per_page'),\n\t\t\ttax_query = $moreButton.data('tax_query');\n\t\t\tif ( tax_query ) {\n\t\t\t\trestBase = '/wp-json/exchange/v1/' + object + '/' + tax_query;\n\t\t\t\tfilters = '?page=' + ( paged + 2 ) + '&posts_per_page=' + posts_per_page;\n\t\t\t} else {\n\t\t\t\trestBase = '/wp-json/wp/v2/' + object;\n\t\t\t\tfilters = '?filter[post_status]=publish&filter[posts_per_page]=' + posts_per_page + '&page=' + ( paged + 2 ) + '&filter[orderby]=date&filter[order]=desc';\n\t\t\t}\n\t\t\tvar restUrl = baseUrl + restBase + filters;\n\t\t\tif ( ( paged + 1 ) < max_num_pages ) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\turl: restUrl,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tcrossDomain: true,\n\t\t\t\t\tcontentType: 'application/json',\n\t\t\t\t\tsuccess: function( data, status, request ) {\n\t\t\t\t\t\t// console.log( 'X-WP-Total: ' + request.getResponseHeader('X-WP-Total') );\n\t\t\t\t\t\t// console.log( 'X-WP-TotalPages: ' + request.getResponseHeader('X-WP-TotalPages') );\n\t\t\t\t\t\tconsole.log( restUrl );\n\t\t\t\t\t\tvar pagelength = data.length,\n\t\t\t\t\t\t\titems = '';\n\t\t\t\t\t\tfor ( var i = 0; i < pagelength; i++ ) {\n\t\t\t\t\t\t\titems = items + data[i].exchange_basics.griditem;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar $items = jQuery( items );\n\t\t\t\t\t\t$archiveGrid.append( $items ).masonry( 'appended',$items ).masonry();\n\t\t\t\t\t\tpaged = paged + 1;\n\t\t\t\t\t\t$moreButton.data('paged', paged );\n\t\t\t\t\t\tif ( paged + 1 == max_num_pages ) {\n\t\t\t\t\t\t\t$moreButton.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function( error ) {\n\t\t\t\t\t\tconsole.log( error );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\tif ( jQuery('body').hasClass('post-type-archive-collaboration') ) {\n\t\tjQuery('.archive__view__toggle').find('a').each( function() {\n\t\t\tjQuery(this).on('click', function( e ) {\n\t\t\t\tvar toggle = jQuery(this),\n\t\t\t\ttoggleID = toggle.data('exchange-toggle');\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( ! toggle.hasClass('active') ) {\n\t\t\t\t\ttoggle.addClass('active');\n\t\t\t\t\tif (  toggleID == 'archive__view--map' ) {\n\t\t\t\t\t\tjQuery('.grid-toggle').removeClass('active');\n\t\t\t\t\t\tjQuery('#archive__view--map').removeClass('hide').animate({'height':'500px'}, 500, loadMap());\n\t\t\t\t\t\tjQuery('#archive__view--grid').addClass('hide');\n\t\t\t\t\t}\n\t\t\t\t\tif ( toggleID == 'archive__view--grid' ) {\n\t\t\t\t\t\tjQuery('.map-toggle').removeClass('active');\n\t\t\t\t\t\tjQuery('#archive__view--grid').removeClass('hide');\n\t\t\t\t\t\tloadGrid();\n\t\t\t\t\t\tjQuery('#archive__view--map').animate({'height':'0'}, 500, function(){\n\t\t\t\t\t\t\tjQuery(this).addClass('hide')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tif ( ! jQuery('#archive__view--map').hasClass('hide') ) {\n\t\t\tloadMap();\n\t\t}\n\t\t// route = createRoute([[41.0082376,28.9783589],[45.8609375,25.7885796],[45.8609375,25.7885796]],[[[41.0082376,28.9783589],[45.8609375,25.7885796]]],[\"Istanbul\",\"Sfantu Gheorghe\",\"\"]);\n\t\t// route.bindPopup('<a class=\\\"\\\" href=\\\"http://localhost/tandem/collaborations/looking-forat-the-invisible/\\\" title=\\\"Navigate to Looking For/At The Invisible\\\">Looking For/At The Invisible</a>');\n\t\t// route.addTo( map );\n\t\t// map.fitBounds( route.getBounds().pad(0.033) );\n\t\t// route.snakeIn();\n\t}\n});\n","jQuery(document).foundation();"],"sourceRoot":"/source/"}