function handleScroll(){var a=pageYOffset;jQuery(window).scroll(function(){var e=jQuery(this).scrollTop();a=e,pageYOffset<100?jQuery(".breadcrumbs-bar").removeClass("scrolled"):jQuery(".breadcrumbs-bar").addClass("scrolled")})}function getUrlVars(){for(var a,e=[],t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<t.length;r++)a=t[r].split("="),e.push(a[0]),e[a[0]]=a[1];return e}function getFocusTranslate(a,e){if(img_data=a.parentNode.dataset,!img_data)return!1;var t=e.clientHeight,r=a.offsetHeight,o=img_data.focus_h*t-r/2,n=(t-r)/t*100,s=o/t*100;return!(o<0||s<0)&&(s>n?n:s)}function doFocusTranslate(a){var e=a.parentNode;if(translate=getFocusTranslate(e,a),translate){var t=translate>0?-1*translate:translate,r="transform: translateY("+t+"%);";a.setAttribute("style",r)}}jQuery(document).foundation();var masonryOptions={percentPosition:!0,columnWidth:".masonry__grid-sizer",gutter:".masonry__gutter-sizer",itemSelector:".archive__grid__griditem"},masonryIsActive=!1;!function(a){a(document).ready(function(){a(".focus").each(function(){var e=a(this).find(".image--main");e.on("load",function(a){doFocusTranslate(a.target)})});for(var e=document.querySelectorAll(".floated"),t=0;t<e.length;t++){var r=e[t].nextElementSibling,o=e[t].offsetHeight,n=r.offsetHeight;o>n&&(r.style.height=o+"px")}a("a[data-open=story__modal--gallery]").on("click",function(e){e.preventDefault();var t=a(this).data("img_id"),r=a("#story__modal--gallery").find("#"+t);a(".orbit").foundation("changeSlide",!0,r)}),a("#token-form__submit").on("click",function(e){e.preventDefault(),a(this).prop("disabled",!0);var t=a(".token-form__collab-select option:selected"),r=a(".grid--form-options"),o=getUrlVars().pr;if(void 0!==t){var n={action:"exchange_token_form",update_id:t.val(),prid:t.data("programme-round"),token:o,security:a(".token-form__nonce").val()};a(".loader-pointer").remove(),a(".loader-wrapper").addClass("go"),r.html(""),a.ajax({url:exchange_ajax.ajax_url,method:"POST",data:n}).done(function(e){r.html(e),a(".loader-wrapper").removeClass("go"),a(this).removeProp("disabled")})}}),a(".translatedparagraph--has_translations").each(function(){var e=a(this).find(".translation-select");e.on("change",function(){function e(e){return function(t,r){a(this).removeClass("show"),a(this).hasClass(e)&&a(this).addClass("show")}}var t="paragraph--"+this.value,r=a(this).parent().parent(".translatedparagraph--has_translations");paragraphs=r.children(".translatedparagraph__paragraph"),paragraphs.each(e(t))})}),(a("body").hasClass("single")||a("body").hasClass("page-child"))&&a("#main").on("scrollme.zf.trigger",handleScroll),a("body").hasClass("archive")&&(a(".archive__grid__masonry").masonry(masonryOptions),masonryIsActive=!0,a("#facet-tabs").on("change.zf.tabs",function(){}),a("#facet-switch").on("click",function(){"#main".foundation("toggle")})),a(".accordion p:empty, .orbit p:empty").remove(),a(".archive__grid .columns","relatedgrid .columns").last().addClass("end"),a('iframe[src*="youtube.com"], iframe[src*="vimeo.com"]').each(function(){a(this).innerWidth()/a(this).innerHeight()>1.5?a(this).wrap("<div class='widescreen flex-video'/>"):a(this).wrap("<div class='flex-video'/>")})}),a(document).on("facetwp-loaded",function(){a(".facetwp-facet").each(function(){var e=a(this).attr("data-name"),t=FWP.settings.labels[e];a('.facet-label[data-for="'+e+'"]').length<1&&a(this).before('<label class="facet-label" data-for="'+e+'"><strong>'+t+"</strong></label>")});var e=a(".archive__grid__masonry");masonryIsActive&&(console.log("destroy"),e.masonry("destroy")),e.masonry(masonryOptions),masonryIsActive=!0,void 0!==FWP_JSON&&console.log(FWP_JSON)})}(jQuery);
//# sourceMappingURL=scripts.min.js.map
